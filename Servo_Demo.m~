%% Initialization
clc
clear
close all

%% Solving the q_1,q_2,q_3

%% Arduino code
if ~isempty(instrfind)
    fclose(instrfind);
    delete(instrfind);
end
a = arduino('/dev/ttyS99', 'Uno')

%%
for i=1:4
    eval(['s',num2str(i),'= servo(a,[''D',num2str(i+1),''']);'])
end

%%

while(1)
    p0 = sin(0.1*t)
    for i = 1:4
        eval(['s = s',num2str(i),';']);
        p = readPosition(s)
        writePosition(s, 0.5);
    end
end